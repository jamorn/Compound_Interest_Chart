<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏û‡∏•‡∏±‡∏á‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô: ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .container {
            max-width: 900px;
        }
        #compoundingChart {
            max-width: 100%;
            height: 400px;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="container mx-auto bg-white p-6 md:p-10 rounded-xl shadow-2xl border border-gray-200">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-blue-700 mb-2 text-center">
            üöÄ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô
        </h1>
        <p class="text-base sm:text-lg text-gray-600 mb-6 text-center">
            ‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô: <span id="initialCapitalDisplay" class="font-semibold text-gray-800">$100</span> | ‡∏Å‡∏≥‡πÑ‡∏£: <span class="font-semibold text-gray-800">1% ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</span>
        </p>
        <p class="text-center text-sm text-gray-500 mb-4">
            ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: <span id="durationDisplay">3 ‡∏õ‡∏µ (1095 ‡∏ß‡∏±‡∏ô)</span>
        </p>

        <!-- Input Section for Capital, Year and Exchange Rate -->
        <div class="flex flex-col sm:flex-row items-center justify-center mb-6 space-y-4 sm:space-y-0 sm:space-x-8">
            <div class="flex flex-col items-center">
                <label for="initialCapitalInput" class="text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (USD):</label>
                <input type="number" id="initialCapitalInput" value="100" min="100" class="w-24 px-4 py-2 text-center border border-gray-400 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200">
                <!-- Warning message added here -->
                <p id="capitalWarning" class="text-red-500 text-xs mt-1 hidden">‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ñ‡∏∑‡∏≠ $100</p>
            </div>
            <div class="flex flex-col items-center">
                <label for="yearInput" class="text-sm font-medium text-gray-700 mb-1">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏õ‡∏µ):</label>
                <input type="number" id="yearInput" value="3" step="1" min="1" max="5" class="w-24 px-4 py-2 text-center border border-gray-400 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200">
            </div>
            <div class="flex flex-col items-center">
                <label for="exchangeRateInput" class="text-sm font-medium text-gray-700 mb-1">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (1 USD = ? THB):</label>
                <input type="number" id="exchangeRateInput" value="31" step="0.01" class="w-24 px-4 py-2 text-center border border-gray-400 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200">
            </div>
        </div>
        
        <!-- Summary Section -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8 text-center">
            <div class="bg-blue-50 p-4 rounded-lg shadow-sm">
                <p class="text-sm text-gray-500">‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
                <p id="summaryInitialCapital" class="text-2xl font-bold text-gray-800">$100.00</p>
            </div>
            <div class="bg-green-50 p-4 rounded-lg shadow-sm">
                <p class="text-sm text-gray-500">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</p>
                <p id="finalAmount" class="text-2xl font-extrabold text-green-600">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</p>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                <p class="text-sm text-gray-500">‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (‡∏ö‡∏≤‡∏ó)</p>
                <p id="netProfit" class="text-2xl font-bold text-gray-800">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</p>
            </div>
        </div>

        
        <!-- Canvas for Chart.js -->
        <div class="w-full mt-6">
            <canvas id="compoundingChart"></canvas>
        </div>

        <!-- Yearly Summary Table -->
        <div class="bg-white p-6 rounded-xl shadow-2xl border border-gray-200 mt-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 text-center">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (1 ‡∏õ‡∏µ)</h2>
            <div class="overflow-x-auto">
                <table id="yearlySummaryTable" class="min-w-full text-sm text-left text-gray-500 border-collapse">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                        <tr>
                            <th scope="col" class="px-3 py-2 text-center rounded-tl-lg">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th scope="col" class="px-3 py-2 text-right">‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (USD)</th>
                            <th scope="col" class="px-3 py-2 text-right">‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (USD)</th>
                            <th scope="col" class="px-3 py-2 text-right rounded-tr-lg">‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (USD)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Table rows will be generated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Daily Trading Table -->
        <div class="bg-white p-6 rounded-xl shadow-2xl border border-gray-200 mt-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 text-center">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á: ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï 1% ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (30 ‡∏ß‡∏±‡∏ô)</h2>
            <div class="overflow-x-auto">
                <table id="dailyTradingTable" class="min-w-full text-sm text-left text-gray-500 border-collapse">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                        <tr>
                            <th scope="col" class="px-3 py-2 text-center rounded-tl-lg">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th scope="col" class="px-3 py-2 text-right">‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô (USD)</th>
                            <th scope="col" class="px-3 py-2 text-right">‡∏Å‡∏≥‡πÑ‡∏£ 1% (USD)</th>
                            <th scope="col" class="px-3 py-2 text-right">‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏° (USD)</th>
                            <th scope="col" class="px-3 py-2 text-center rounded-tr-lg">Lot Size</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Table rows will be generated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <p class="text-xs text-gray-400 mt-4 text-center">
                *‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î‡∏à‡∏£‡∏¥‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏°‡∏≠‡πÑ‡∏õ
            </p>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const dailyRate = 0.01;
            
            const initialCapitalInput = document.getElementById('initialCapitalInput');
            const initialCapitalDisplay = document.getElementById('initialCapitalDisplay');
            const summaryInitialCapital = document.getElementById('summaryInitialCapital');
            const yearInput = document.getElementById('yearInput');
            const exchangeRateInput = document.getElementById('exchangeRateInput');
            const durationDisplay = document.getElementById('durationDisplay');
            const finalAmountElement = document.getElementById('finalAmount');
            const netProfitElement = document.getElementById('netProfit');
            const ctx = document.getElementById('compoundingChart').getContext('2d');
            const yearlySummaryTableBody = document.querySelector('#yearlySummaryTable tbody');
            const dailyTradingTableBody = document.querySelector('#dailyTradingTable tbody');
            const capitalWarning = document.getElementById('capitalWarning');

            let compoundingChart = null; // Reference to the chart instance

            function generateYearlySummaryTable(initialCapitalUSD) {
                yearlySummaryTableBody.innerHTML = '';
                let currentCapital = initialCapitalUSD;
                const monthlyGrowthFactor = Math.pow(1 + dailyRate, 30);

                for (let month = 1; month <= 12; month++) {
                    const startCapital = currentCapital;
                    const endCapital = startCapital * monthlyGrowthFactor;
                    const monthlyProfit = endCapital - startCapital;
                    
                    const row = document.createElement('tr');
                    row.className = 'bg-white border-b hover:bg-gray-50';
                    if (month % 2 === 0) {
                        row.classList.add('bg-gray-50');
                    }

                    row.innerHTML = `
                        <td class="px-3 py-2 font-medium text-gray-900 text-center">${month}</td>
                        <td class="px-3 py-2 text-right">$${startCapital.toFixed(2)}</td>
                        <td class="px-3 py-2 text-right text-green-600">$${monthlyProfit.toFixed(2)}</td>
                        <td class="px-3 py-2 text-right font-semibold">$${endCapital.toFixed(2)}</td>
                    `;
                    yearlySummaryTableBody.appendChild(row);

                    currentCapital = endCapital;
                }
            }
            
            function generateDailyTradingTable(initialCapitalUSD) {
                dailyTradingTableBody.innerHTML = '';
                let currentCapital = initialCapitalUSD;

                for (let day = 1; day <= 30; day++) {
                    const dailyProfit = currentCapital * dailyRate;
                    const finalCapital = currentCapital + dailyProfit;
                    
                    // Lot size calculation: 0.01 for every $100
                    const lotSize = 0.01 * Math.ceil(currentCapital / 100);

                    const row = document.createElement('tr');
                    row.className = 'bg-white border-b hover:bg-gray-50';
                    if (day % 2 === 0) {
                        row.classList.add('bg-gray-50');
                    }

                    row.innerHTML = `
                        <td class="px-3 py-2 font-medium text-gray-900 text-center">${day}</td>
                        <td class="px-3 py-2 text-right">$${currentCapital.toFixed(2)}</td>
                        <td class="px-3 py-2 text-right text-green-600">$${dailyProfit.toFixed(2)}</td>
                        <td class="px-3 py-2 text-right font-semibold">$${finalCapital.toFixed(2)}</td>
                        <td class="px-3 py-2 text-center font-bold text-gray-800">${lotSize.toFixed(2)}</td>
                    `;
                    dailyTradingTableBody.appendChild(row);

                    currentCapital = finalCapital;
                }
            }


            function updateChartAndSummary() {
                // Get the initial capital from the input field
                const rawInitialCapital = parseFloat(initialCapitalInput.value);
                
                // Show/hide warning message based on input value
                if (rawInitialCapital < 100) {
                    capitalWarning.classList.remove('hidden');
                } else {
                    capitalWarning.classList.add('hidden');
                }

                // Use a minimum of 100 for all calculations, regardless of input
                const initialCapitalUSD = Math.max(100, rawInitialCapital || 100);
                
                // Update the displayed initial capital values
                initialCapitalDisplay.textContent = `$${initialCapitalUSD.toFixed(2)}`;
                summaryInitialCapital.textContent = `$${initialCapitalUSD.toFixed(2)}`;
                
                const years = parseInt(yearInput.value) || 0;
                const totalDays = years * 365;
                const exchangeRate = parseFloat(exchangeRateInput.value) || 0;
                
                durationDisplay.textContent = `${years} ‡∏õ‡∏µ (${totalDays} ‡∏ß‡∏±‡∏ô)`;

                const labels = [];
                const dataPoints = [];
                let currentBalanceUSD = initialCapitalUSD;

                // Generate data points for the chart
                for (let day = 0; day <= totalDays; day++) {
                    if (day % 30 === 0 || day === totalDays) {
                        const currentBalanceTHB = currentBalanceUSD * exchangeRate;
                        labels.push(`‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${day}`);
                        dataPoints.push(parseFloat(currentBalanceTHB.toFixed(2)));
                    }

                    if (day < totalDays) {
                        currentBalanceUSD *= (1 + dailyRate);
                    }
                }
                
                // Display final amounts in the summary section in THB
                const finalAmountTHB = dataPoints[dataPoints.length - 1];
                const netProfitTHB = finalAmountTHB - (initialCapitalUSD * exchangeRate);

                finalAmountElement.textContent = `‡∏ø${finalAmountTHB.toLocaleString('th-TH', { minimumFractionDigits: 2 })}`;
                netProfitElement.textContent = `‡∏ø${netProfitTHB.toLocaleString('th-TH', { minimumFractionDigits: 2 })}`;

                // Destroy old chart and create a new one
                if (compoundingChart) {
                    compoundingChart.destroy();
                }

                compoundingChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: '‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)',
                            data: dataPoints,
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: 'start',
                            tension: 0.2,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: '‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÅ‡∏ö‡∏ö‡∏ó‡∏ß‡∏µ‡∏Ñ‡∏π‡∏ì (Exponential Growth)',
                                font: { size: 16, weight: 'bold' },
                                color: '#374151'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += new Intl.NumberFormat('th-TH', { style: 'currency', currency: 'THB' }).format(context.parsed.y);
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: '‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)'
                                },
                                ticks: {
                                    callback: function(value, index, values) {
                                        return new Intl.NumberFormat('th-TH', { style: 'currency', currency: 'THB', notation: 'compact', compactDisplay: 'short' }).format(value);
                                    }
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: '‡∏ß‡∏±‡∏ô'
                                }
                            }
                        }
                    }
                });
                
                // Pass the dynamic initial capital to the table generation functions
                generateYearlySummaryTable(initialCapitalUSD);
                generateDailyTradingTable(initialCapitalUSD);
            }

            // Initial render
            updateChartAndSummary();

            // Add event listeners to input fields
            initialCapitalInput.addEventListener('input', updateChartAndSummary);
            yearInput.addEventListener('input', updateChartAndSummary);
            exchangeRateInput.addEventListener('input', updateChartAndSummary);
        });
    </script>
</body>
</html>
