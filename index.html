<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏û‡∏•‡∏±‡∏á‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô: ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .container {
            max-width: 900px;
        }
        #compoundingChart {
            max-width: 100%;
            height: 400px;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="container mx-auto bg-white p-6 md:p-10 rounded-xl shadow-2xl border border-gray-200">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-blue-700 mb-2 text-center">
            üöÄ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô
        </h1>
        <p class="text-base sm:text-lg text-gray-600 mb-6 text-center">
            ‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô: <span class="font-semibold text-gray-800">$100</span> | ‡∏Å‡∏≥‡πÑ‡∏£: <span class="font-semibold text-gray-800">1% ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</span>
        </p>
        <p class="text-center text-sm text-gray-500 mb-4">
            ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: <span id="durationDisplay">3 ‡∏õ‡∏µ (1095 ‡∏ß‡∏±‡∏ô)</span>
        </p>

        <!-- Input Section for Year and Exchange Rate -->
        <div class="flex flex-col sm:flex-row items-center justify-center mb-6 space-y-4 sm:space-y-0 sm:space-x-8">
            <div class="flex flex-col items-center">
                <label for="yearInput" class="text-sm font-medium text-gray-700 mb-1">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏õ‡∏µ):</label>
                <input type="number" id="yearInput" value="3" step="1" min="1" max="5" class="w-24 px-4 py-2 text-center border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200">
            </div>
            <div class="flex flex-col items-center">
                <label for="exchangeRateInput" class="text-sm font-medium text-gray-700 mb-1">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (1 USD = ? THB):</label>
                <input type="number" id="exchangeRateInput" value="31" step="0.01" class="w-24 px-4 py-2 text-center border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200">
            </div>
        </div>
        
        <!-- Summary Section -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8 text-center">
            <div class="bg-blue-50 p-4 rounded-lg shadow-sm">
                <p class="text-sm text-gray-500">‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
                <p class="text-2xl font-bold text-gray-800">$100.00</p>
            </div>
            <div class="bg-green-50 p-4 rounded-lg shadow-sm">
                <p class="text-sm text-gray-500">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</p>
                <p id="finalAmount" class="text-2xl font-extrabold text-green-600">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</p>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg shadow-sm">
                <p class="text-sm text-gray-500">‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (‡∏ö‡∏≤‡∏ó)</p>
                <p id="netProfit" class="text-2xl font-bold text-gray-800">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</p>
            </div>
        </div>

        <!-- Canvas for Chart.js -->
        <div class="w-full">
            <canvas id="compoundingChart"></canvas>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const initialCapitalUSD = 100;
            const dailyRate = 0.01;
            
            const yearInput = document.getElementById('yearInput');
            const exchangeRateInput = document.getElementById('exchangeRateInput');
            const durationDisplay = document.getElementById('durationDisplay');
            const finalAmountElement = document.getElementById('finalAmount');
            const netProfitElement = document.getElementById('netProfit');
            const ctx = document.getElementById('compoundingChart').getContext('2d');

            let compoundingChart = null; // Reference to the chart instance

            function updateChartAndSummary() {
                const years = parseInt(yearInput.value) || 0;
                const totalDays = years * 365;
                const exchangeRate = parseFloat(exchangeRateInput.value) || 0;
                
                durationDisplay.textContent = `${years} ‡∏õ‡∏µ (${totalDays} ‡∏ß‡∏±‡∏ô)`;

                const labels = [];
                const dataPoints = [];
                let currentBalanceUSD = initialCapitalUSD;

                // Generate data points for the chart
                for (let day = 0; day <= totalDays; day++) {
                    if (day % 30 === 0 || day === totalDays) {
                        const currentBalanceTHB = currentBalanceUSD * exchangeRate;
                        labels.push(`‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${day}`);
                        dataPoints.push(parseFloat(currentBalanceTHB.toFixed(2)));
                    }

                    if (day < totalDays) {
                        currentBalanceUSD *= (1 + dailyRate);
                    }
                }
                
                // Display final amounts in the summary section in THB
                const finalAmountTHB = dataPoints[dataPoints.length - 1];
                const netProfitTHB = finalAmountTHB - (initialCapitalUSD * exchangeRate);

                finalAmountElement.textContent = `‡∏ø${finalAmountTHB.toLocaleString('th-TH', { minimumFractionDigits: 2 })}`;
                netProfitElement.textContent = `‡∏ø${netProfitTHB.toLocaleString('th-TH', { minimumFractionDigits: 2 })}`;

                // Destroy old chart and create a new one
                if (compoundingChart) {
                    compoundingChart.destroy();
                }

                compoundingChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: '‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)',
                            data: dataPoints,
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: 'start',
                            tension: 0.2,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: '‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÅ‡∏ö‡∏ö‡∏ó‡∏ß‡∏µ‡∏Ñ‡∏π‡∏ì (Exponential Growth)',
                                font: { size: 16, weight: 'bold' },
                                color: '#374151'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += new Intl.NumberFormat('th-TH', { style: 'currency', currency: 'THB' }).format(context.parsed.y);
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: '‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)'
                                },
                                ticks: {
                                    callback: function(value, index, values) {
                                        return new Intl.NumberFormat('th-TH', { style: 'currency', currency: 'THB', notation: 'compact', compactDisplay: 'short' }).format(value);
                                    }
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: '‡∏ß‡∏±‡∏ô'
                                }
                            }
                        }
                    }
                });
            }

            // Initial chart render
            updateChartAndSummary();

            // Add event listeners to input fields
            yearInput.addEventListener('input', updateChartAndSummary);
            exchangeRateInput.addEventListener('input', updateChartAndSummary);
        });
    </script>
</body>
</html>
